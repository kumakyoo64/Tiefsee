!to "inkiste2.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 64,42,32,42,95,43,32,43,57,45,32,45,71,48,40,48,0
SPRITE_COL  !by 8,11,0,9,0,0,2,2,9,9
SPRITE_BG   !by 224
SPRITE_MC   !by 224
SPRITE_XS   !by 224

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B2B6

CHAR        !by 128,138,138,138,138,138,138,138,138,187,195,129,139,149,149,149,149,149,149,149,188,196,130,140,150,150,150,150,150,150,150,189,197,131,141,151,159,159,159,159,159,183,190,198,132,142,152,160,165,170,174,179,179,179,199,133,143,153,161,166,171,175,180,184,191,200,134,144,154,162,167,172,176,137,137,137,201,135,145,155,163,168,173,177,181,185,192,202,136,146,156,164,169,169,178,182,186,193,169,137,147,157,137,137,137,137,137,137,194,157,137,148,158,137,137,137,137,137,137,148,158
CHAR_COL    !by 8,8,8,8,8,8,8,8,8,9,9,8,8,8,8,8,8,8,8,8,8,9,8,8,8,8,8,8,8,8,8,9,9,8,12,12,8,8,8,8,8,12,8,8,8,8,8,8,8,10,2,8,8,8,9,9,8,8,8,8,10,2,8,8,8,9,9,9,9,9,11,2,9,9,9,9,9,9,9,2,11,11,11,11,9,9,9,9,9,9,2,10,8,8,11,9,9,9,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8
CHAR_DATA   !by 15,15,15,14,7,7,7,7,7,7,7,3,3,3,3,3,7,7,135,199,71,7,167,151,198,199,231,103,231,183,240,0,0,127,127,48,63,60,63,30,192,192,207,224,231,224,224,239,204,223,223,222,159,191,177,63,63,127,127,65,127,243,142,225,124,0,0,0,255,0,255,0,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,0,255,255,255,128,255,255,255,255,128,255,255,255,0,255,255,255,0,0,0,0,0,0,0,3,0,255,255,255,200,255,255,15,240,255,3,255,0,255,0,0,7,255,252,31,255,239,255,255,255,255,252,249,131,199,24,191,9,110,25,0,255,49,255,0,254,207,253,255,140,192,192,192,140,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,0,255,255,255,0,255,255,255,0,0,0,0,0,0,0,224,0,255,255,255,255,255,199,255,48,255,224,255,0,255,0,192,240,255,63,255,255,255,255,255,0,0,0,0,0,1,1,3,3,3,1,0,0,0,0,0,255,255,255,255,127,255,255,255,127,255,255,255,255,255,255,255,0,255,255,255,255,255,0,0,0,255,255,255,255,255,255,192,255,255,0,255,124,255,0,0,63,252,240,224,224,224,192,192,127,127,127,255,7,3,1,1,48,96,0,0,0,0,0,0,0,255,255,255,255,255,255,62,254,254,2,255,1,255,0,0,0,0,0,19,8,0,32,194,193,192,128,128,128,64,0,48,0,0,0,0,0,255,0,255,0,0,0,0,0,28,62,126,127,62,28,0,0,0,0,0,56,56,56,124,124,124,56,0,0,194,60,0,0,0,0,0,0,0,0,0,0,128,192,192,192,192,192,192,128,0,0,0,255,255,255,255,255,31,3,1,20,4,12,12,4,44,12,8,72,24,152,24,0,0,0,0,0,255,255,255,255,255,255,255,255,255,15,255,0,255,0,0,255,255,255,223,254,199,255,255,252,207,16,0,255,0,255,0,0,0,0,0,0,0,0,15,15,255,255,193,127,224,0,0,255,255,255,224,255,255,248,135,254,184,0,0,255,0,255,0,0,0,0,255,0,0,0,255,255,255,255,1,255,255,255,255,254,0,0,0,255,0,0,0,0,255,255,255,255,63,0,0,255,255,254,252,0,0,0,0,255,252,159,127,248,159,225,127,28,0,0,0,255,24,255,0,249,255,223,252,140,192,192,192,4,5,3,132,1,6,12,1,1,6,12,12,27,22,12,1,1,11,11,2,7,7,2,10,105,227,227,230,231,237,15,0,255,0,0,0,0,1,1,1,1,3,243,251,247,7,7,247,247,251,251,251,249,253,253,228,252,60,254,224,126,198,254,24
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,193,255,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,23,130,0,31,131,224,31,199,252,61,255,250,62,255,234,63,61,250,127,195,242,127,255,242,127,255,250,191,255,210,255,255,242,207,255,244,253,255,180,127,159,228,3,248,100,0,15,231,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,96,0,0,33,255,255,176,0,0,0,80,0,0,96,0,0,48,255,255,0,0,0,224,0,0,48,0,0,24,127,255,64,0,0,104,0,0,56,0,0,32,0,0,176,127,255,144,0,0,80,0,0,0,0,0,160,255,255,224,0,0,64,0,0,96,0,0,49,255,255,48,0,0,0,16,0,0,144,0,0,16,0,0,64,7,240,7,252,31,0,0,0,255,255,255,0,0,0,0,0,0,15,0,0,0,55,0,131,0,0,128,0,56,129,240,0,192,15,207,192,0,0,207,252,31,224,0,0,231,255,255,224,0,0,224,0,0,0,239,255,63,204,7,240,223,255,255,223,252,63,222,31,255,159,255,255,191,239,255,177,255,255,63,255,255,63,255,255,127,255,192,127,252,0,65,249,254,127,131,254,243,199,252,142,24,8,225,191,248,124,9,248,0,110,24,0,25,224,0,0,0,0,255,255,255,0,49,0,255,255,255,0,0,0,0,1,0,0,48,0,0,2,0,0,0,0,0,115,128,0,0,0,0,0,0,0,0,0,0,115,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,5,0,0,6,0,0,5,0,0,15,0,0,12,0,0,0,9,0,0,15,0,0,15,0,0,12,0,0,9,0,0,25,0,0,18,0,0,20,0,0,25,0,0,31,0,0,15,0,0,10,0,0,10,0,0,14,0,0,12,0,0,12,0,0,12,0,0,8,0,0,8,0,0,8,0,0,8,0,0,0,8,0,0,8,0,0,8,7,192,8,248,63,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,3,0,0,2,0,0,2,0,0,2,0,0,4,0,0,124,255,255,252,0,0,4,0,0,0,4,0,0,2,0,0,2,0,0,2,0,0,3,0,0,1,0,0,1,0,0,13,0,0,1,0,1,225,0,48,0,15,192,15,128,3,192,0,48,28,3,143,0,60,64,115,128,241,255,35,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,128,0,16,128,0,31,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,0,0,176,0,0,144,0,0,208,0,0,72,0,0,168,0,0,0,152,0,0,200,0,0,248,0,0,24,0,0,200,0,0,228,0,0,188,0,0,148,0,0,196,0,0,220,0,0,72,0,0,104,0,0,40,0,0,56,0,0,24,0,0,24,0,0,24,0,0,8,0,0,8,0,0,8,0,0,8,0,0,0,8,0,0,8,0,0,8,0,0,8,3,224,255,252,31,0,0,0,128,0,0,128,0,0,192,0,0,192,0,0,64,0,0,64,0,0,96,0,0,32,0,0,32,0,0,32,0,0,16,0,0,16,0,0,16,0,0,31,255,255,16,0,0,0,48,0,0,32,0,0,32,0,0,32,0,0,96,0,0,64,0,0,64,0,0,192,0,0,192,0,0,128,0,0,128,0,0,190,0,1,128,96,0,12,0,0,113,135,240,30,0,0,131,54,0,255,17,224,254,102,28,254,127,252,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,0,0,33,0,0,63,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,1,199,0,1,3,0,3,1,0,3,1,0,3,1,0,3,131,0,1,255,0,0,255,0,0,254,0,0,124,0,0,120,0,0,112,6,0,112,0,31,128,112,63,192,248,63,64,248,62,192,248,31,128,112,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,0,0,248,0,0,252,0,0,236,0,0,156,0,0,56,0,0,240,0,0,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,85,85,21,85,85,21,85,85,16,0,0,21,85,85,21,85,85,21,85,85,16,0,0,0,21,85,85,21,85,85,21,85,85,20,0,0,21,85,85,21,85,85,21,85,85,21,85,85,20,0,0,21,85,85,85,85,85,85,85,85,80,0,0,21,85,85,85,85,85,85,85,85,80,0,0,85,85,85,85,85,85,85,85,85,85,85,85,0,85,21,85,64,0,0,0,0,0,0,0,0,85,85,85,85,85,85,69,85,85,85,85,86,85,85,90,85,85,82,81,80,24,84,69,88,85,85,80,65,64,0,21,85,90,16,0,2,21,85,86,0,0,10,0,64,0,21,20,0,0,2,0,0,1,66,0,20,10,188,0,10,187,4,10,138,16,14,138,0,15,240,0,3,240,0,243,207,3,243,207,3,15,192,15,59,192,15,59,192,12,58,0,12,58,192,12,59,48,12,59,204,60,59,243,60,63,252,0,0,0,85,85,85,0,0,0,0,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,84,85,85,95,85,85,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,85,85,85,85,85,85,85,85,170,170,165,85,85,84,85,85,86,85,85,86,170,170,164,85,85,84,85,85,86,85,85,86,0,170,170,166,85,85,86,85,85,86,85,85,86,85,85,84,170,170,164,85,85,86,85,85,86,85,85,86,170,170,166,85,85,86,85,85,85,85,85,85,170,170,170,85,85,86,85,85,86,85,85,86,85,85,86,85,86,150,170,170,169,0,0,0,0,170,170,170,85,85,85,85,85,85,85,85,85,69,85,85,69,85,85,133,85,85,2,85,85,9,90,85,137,85,85,170,165,89,69,90,106,132,169,170,69,86,170,0,0,2,170,170,170,170,170,170,170,170,170,170,170,170,250,170,170,10,170,170,0,2,170,170,2,170,170,3,170,170,195,170,170,243,170,170,243,170,170,3,40,168,3,170,170,15,10,170,3,170,138,2,170,170,14,138,32,194,10,0,62,0,0,243,0,0,170,170,170,85,85,85,170,170,170,85,85,85,85,85,101,85,85,85,0,85,85,149,85,85,105,85,85,169,85,85,69,85,85,117,85,85,69,85,85,169,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,85,85,85,85,85,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,0,170,170,170,85,85,85,85,85,85,85,85,85,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,85,85,85,105,85,85,170,170,170,0,0,0,0,170,170,170,85,85,85,85,85,85,85,85,85,101,85,69,85,85,5,85,85,133,149,169,37,102,85,5,85,85,165,150,170,170,85,85,5,170,170,134,85,85,69,0,0,0,166,170,170,105,106,170,170,170,170,150,138,170,106,143,250,170,131,58,0,170,128,10,170,204,2,170,255,3,170,191,15,175,60,243,191,60,243,186,252,2,250,60,3,234,60,14,227,48,3,171,60,2,235,51,14,171,60,206,235,63,62,195,255,207,170,170,170,85,85,85,170,170,170,85,85,85,85,85,85,85,85,85,0,85,85,85,85,85,85,149,85,85,69,85,85,117,85,85,69,85,85,149,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
