!to "autor.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 24
CHAR_COL1   !by 14
CHAR_COL2   !by 8
SPRITE_POS  !by 73,42,74,42,83,43,33,43,75,45,59,45,71,48,32,48,0
SPRITE_COL  !by 9,11,10,15,6,1,12,2,1,13
SPRITE_BG   !by 204
SPRITE_MC   !by 204
SPRITE_XS   !by 192

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B166

CHAR        !by 128,139,150,161,172,183,194,204,215,226,237,129,140,151,162,173,184,195,205,216,227,238,130,141,152,163,174,185,196,206,217,228,239,131,142,153,164,175,186,129,207,218,229,240,132,143,154,165,176,187,197,208,219,230,241,133,144,155,166,177,188,198,209,220,231,129,134,145,156,167,178,189,199,210,221,232,129,135,146,157,168,179,190,200,211,222,233,129,136,147,158,169,180,191,201,212,223,234,242,137,148,159,170,181,192,202,213,224,235,243,138,149,160,171,182,193,203,214,225,236,244
CHAR_COL    !by 5,5,5,5,5,5,13,0,0,0,0,5,5,5,5,5,5,5,0,0,5,5,5,5,5,5,1,0,2,2,0,0,0,5,5,5,0,9,10,1,2,2,0,0,5,5,5,0,9,10,2,2,0,0,0,5,5,5,10,10,0,2,2,0,5,0,5,5,5,10,10,0,10,9,1,0,0,5,0,3,6,2,10,10,2,2,0,0,1,3,11,6,0,0,2,2,11,11,1,9,11,14,6,0,10,10,8,11,11,11,11,14,14,6,6,10,14,8,11,14,14
CHAR_DATA   !by 120,252,230,243,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,159,159,127,127,249,255,191,127,115,99,127,249,255,127,127,127,255,108,127,255,61,7,0,0,0,128,130,19,3,2,0,1,1,2,30,31,4,4,0,60,4,0,0,0,0,1,3,7,7,15,15,31,48,0,0,64,0,195,212,196,61,252,245,255,253,253,213,215,64,64,0,192,192,242,240,240,248,255,255,255,255,255,251,191,255,255,187,255,255,255,255,255,255,239,255,255,255,255,191,159,255,255,31,255,251,255,255,255,255,255,255,71,15,31,126,255,255,255,126,231,238,96,32,240,71,10,0,0,199,224,192,0,0,0,0,0,7,2,34,40,31,213,253,119,241,245,253,29,213,71,87,215,241,87,245,71,102,72,248,254,127,127,255,188,253,253,255,255,255,255,255,255,253,250,251,255,254,159,63,255,248,239,254,255,254,254,254,254,126,254,230,254,254,254,222,254,254,252,248,248,224,252,188,189,253,254,62,54,188,0,0,48,0,0,0,2,0,1,3,7,15,13,13,61,245,85,84,16,223,95,223,255,119,247,119,127,127,79,71,71,71,247,247,245,24,112,120,60,111,251,249,185,188,249,225,96,246,215,193,17,182,208,160,64,128,128,0,0,255,255,127,255,255,255,255,254,254,254,252,252,252,252,254,252,3,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,0,0,0,16,8,176,240,112,64,192,192,192,192,192,128,128,128,0,0,0,0,0,0,128,128,128,192,240,240,240,240,242,184,240,68,96,32,139,137,12,46,238,179,144,144,0,128,0,7,12,0,0,0,0,0,0,0,0,0,0,0,3,47,175,175,175,143,128,0,0,0,0,204,255,255,239,139,175,172,172,171,171,171,171,170,171,168,232,254,254,254,254,126,38,4,0,127,63,31,31,143,143,135,131,129,192,192,224,224,240,248,252,0,0,0,0,0,8,8,4,32,16,0,1,249,249,128,48,32,111,65,0,0,0,0,0,0,0,0,56,224,224,192,0,192,0,128,0,0,0,0,0,0,0,0,184,15,252,60,0,12,8,0,0,0,0,0,0,0,0,6,4,0,0,0,134,3,63,63,255,255,255,47,63,128,216,252,255,255,255,255,255,3,15,255,255,255,254,250,234,236,251,58,63,15,3,0,0,0,0,0,240,192,240,240,128,96,156,208,252,0,0,0,0,6,3,0,0,0,0,0,0,0,0,0,63,120,31,24,48,31,31,7,0,0,0,0,0,192,192,192,192,0,240,242,255,195,192,160,48,192,192,192,192,248,247,0,0,1,1,3,14,252,252,192,192,128,0,0,0,0,0,0,0,0,28,12,12,159,217,227,193,111,231,231,241,247,255,227,192,1,2,24,33,0,128,0,32,0,1,8,4,4,0,0,0,0,1,1,1,1,1,0,0,0,192,96,16,128,0,128,0,0,0,0,0,3,0,0,3,3,3,131,131,128,128,128,1,0,0,4,8,240,0,1,65,130,2,2,0,1,0,0,0,0,5,4,20,20,0,64,0,0,1,5,5,159,159,157,188,255,252,254,254,255,255,255,127,252,124,127,255,223,255,255,254,252,248,120,124,0,0,0,128,128,32,32,32,127,127,255,255,255,255,255,119,115,115,115,57,19,63,30,62,128,192,128,128,128,0,0,0,128,128,0,0,0,0,0,0,240,112,80,95,31,31,29,93,117,61,51,12,124,95,95,93,85,117,85,245,220,116,84,117,251,251,191,255,241,123,127,231,0,4,12,64,192,0,0,0,255,239,62,38,38,39,63,247,15,13,143,194,197,143,179,102,127,255,255,255,255,251,255,123,0,0,0,0,0,0,0,128,55,119,255,255,255,255,255,255,255,255,255,255,255,255,241,62,0,0,0,0,0,192,112,112,112,112,95,255,255,95,125,117,87,71,87,87,87,87,71,87,253,255,251,255,254,251,255,254,0,1,0,0,0,0,0,0,255,255,255,255,255,255,127,119,255,207,253,255,255,253,255,255,252,252,248,247,255,255,255,255,0,0,0,128,224,240,252,254,0,0,0,0,240,252,92,23,213,245,245,245,247,247,245,245
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,0,14,32,0,1,24,0,0,0,0,0,3,0,0,56,0,200,61,128,0,192,128,11,0,0,8,0,0,32,0,0,64,0,2,192,0,1,128,0,5,0,128,0,1,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,36,128,192,2,0,64,0,0,64,0,0,32,0,0,208,4,0,145,4,1,1,4,16,128,8,1,1,24,0,0,224,0,0,192,0,0,0,12,0,0,0,8,0,0,4,0,0,128,0,64,32,0,0,112,0,0,50,0,0,28,1,0,0,1,0,0,0,0,2,128,0,0,130,0,33,128,0,128,196,0,0,8,0,0,48,0,99,224,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,8,0,0,8,0,2,12,0,4,12,0,8,8,0,96,8,0,128,0,0,128,16,1,128,32,3,0,32,2,0,64,6,0,128,2,1,0,2,0,0,3,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,208,0,0,128,0,0,96,144,0,132,204,0,0,4,0,16,96,128,32,128,64,3,132,160,10,64,80,9,0,0,0,0,8,32,0,24,64,0,0,0,0,12,128,0,4,0,0,0,20,0,0,0,0,0,1,0,0,8,0,0,8,0,0,0,0,0,8,128,0,0,146,116,0,6,0,64,0,0,48,2,0,8,6,0,24,1,0,16,0,0,68,0,1,4,0,0,4,8,77,8,0,0,0,16,7,2,32,0,0,0,38,16,1,1,136,1,1,4,0,0,132,1,0,160,1,0,16,0,0,18,2,0,1,0,0,0,128,0,24,128,0,192,132,0,36,128,0,32,136,0,130,64,1,3,97,0,131,132,0,48,16,0,0,41,0,0,8,0,0,8,0,0,0,0,0,1,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,32,32,0,0,48,0,0,0,0,0,0,1,0,128,2,0,0,0,0,0,0,0,0,2,4,0,0,8,0,0,0,0,1,128,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,211,49,0,64,115,49,193,243,20,196,192,0,0,64,28,0,64,192,4,0,208,4,240,192,0,0,0,1,240,208,7,21,84,3,1,80,28,3,92,20,13,20,0,0,240,0,0,209,0,0,212,0,0,60,7,0,48,5,0,192,21,0,0,21,0,0,29,0,0,52,0,3,7,0,0,31,0,48,61,0,0,51,17,0,0,3,0,4,65,0,1,55,0,12,4,0,12,4,0,0,0,0,12,0,0,0,0,0,0,0,0,12,0,16,0,0,80,0,68,0,0,240,0,0,192,0,0,192,0,1,48,0,1,240,0,0,0,0,1,4,0,0,7,0,0,0,15,0,1,12,0,3,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,192,0,48,12,0,0,3,0,12,0,64,12,0,4,0,0,0,2,0,0,14,0,0,16,10,0,16,10,0,64,2,0,0,2,0,0,10,0,0,10,0,0,10,0,0,8,0,0,8,0,0,40,0,0,40,8,0,40,0,0,168,0,2,168,0,10,168,0,42,168,40,42,160,40,42,128,40,234,128,136,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,195,19,13,67,253,48,196,13,48,64,1,0,76,3,0,21,0,0,0,17,0,0,5,192,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,12,0,0,3,0,192,0,0,0,0,192,0,0,192,0,0,0,0,1,0,0,1,12,0,0,0,48,0,0,0,1,0,0,0,0,52,0,3,20,0,1,0,64,0,0,192,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,63,0,0,0,0,0,0,0,1,204,0,0,240,0,12,63,0,12,5,80,12,0,112,28,77,192,0,71,3,0,240,0,0,0,196,0,13,5,0,1,15,1,64,12,19,241,0,51,197,31,28,92,192,117,84,192,1,209,63,80,85,5,116,87,207,196,254,197,212,192,4,64,168,0,2,168,0,234,168,0,170,160,2,170,160,2,170,160,14,170,160,10,42,128,10,160,0,0,58,168,0,42,168,0,42,138,0,234,128,0,168,128,3,170,0,3,42,0,0,186,0,0,14,0,192,142,0,0,128,128,0,140,128,48,128,128,0,131,0,0,3,0,0,0,192,0,32,192,48,8,192,48,0,0,48,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,88,0,0,129,40,0,0,24,0,2,0,0,0,6,0,0,0,0,32,2,0,24,0,0,0,0,0,0,1,16,0,0,128,0,0,8,0,0,64,0,0,0,0,0,34,0,0,2,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,8,0,28,136,10,0,0,2,0,8,16,0,8,0,0,0,1,0,0,0,128,4,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,128,0,1,128,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,192,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,24,0,0,0,0,0,128,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,6,0,0,0,0,0,0,6,0,0,15,0,0,2,0,192,1,160,32,0,0,192,0,0,192,128,1,0,0,6,0,0,12,0,0,24,0,0,120,0,0,224,0,1,192,0,0,3,128,0,2,0,0,4,0,0,12,0,0,12,0,0,8,0,0,24,3,65,25,128,243,3,255,224,3,193,224,31,128,1,63,102,0,55,255,0,39,255,224,38,255,192,34,31,128,32,124,64,32,224,128,32,199,128,32,223,252,32,63,204,0,160,63,140,176,62,206,152,79,218,24,31,183,28,51,207,31,17,207,15,240,60,15,241,254,15,243,252,7,247,251,3,247,252,1,55,252,0,35,126,0,3,254,0,1,255,6,0,31,2,0,0,3,0,0,3,128,0,3,128,0,3,192,0,0,3,192,0,1,240,15,1,240,127,1,255,254,0,255,252,0,127,248,0,127,240,0,63,192,0,31,0,0,15,96,0,7,208,0,3,192,0,1,240,0,0,248,0,0,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,196,4,1,21,52,48,0,63,67,48,61,64,76,112,16,16,17,209,204,48,64,68,48,80,3,48,16,52,0,48,71,16,112,0,1,84,0,191,81,0,128,93,0,160,84,0,170,48,0,168,176,0,168,148,16,0,44,204,74,160,92,10,161,84,42,177,112,42,165,204,42,163,85,42,172,112,42,164,213,170,160,211,170,172,20,170,160,48,170,164,17,170,160,208,170,160,116,0,170,172,65,170,160,3,170,172,1,0,32,3,200,32,0,60,44,16,53,32,0,25,45,112,88,163,0,24,163,0,8,163,0,10,171,0,42,171,0,42,168,0,42,168,0,10,168,192,2,160,208,18,168,208,18,168,0,18,160,0,22,160,0,0,20,160,0,80,164,0,0,32,0,10,32,0,2,32,0,2,32,0,14,160,0,66,160,0,10,136,0,2,186,208,2,10,132,64,46,176,81,34,176,16,98,160,0,32,172,0,172,168,0,160,171,0,160,43,5,160,42,0,160,42,18,160,42,0,2,162,42,10,162,138,10,162,130,10,130,2,10,128,2,10,128,0,10,128,0,10,128,0,10,0,0,10,0,0,10,0,0,48,0,0,12,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124,241,52,48,213,1,240,21,193,0,31,71,0,204,208,1,64,81,0,3,244,1,239,244,1,39,221,0,3,244,0,13,250,0,0,5,208,0,1,195,0,8,192,3,10,0,0,10,128,0,50,0,0,59,0,12,5,192,0,7,244,192,35,64,192,128,0,192,4,0,64,0,0,48,0,0,12,128,16,0,4,0,192,0,0,112,48,0,208,16,0,68,0,96,44,1,0,0,0,128,0,64,0,0,200,65,128,192,0,128,0,0,60,240,1,195,64,1,15,0,16,5,112,0,84,240,0,5,48,0,0,20,0,0,4,64,0,68,0,0,15,0,0,64,32,0,208,48,0,0,16,1,13,113,1,5,241,1,31,209,1,0,63,64,1,209,64,21,64,192,4,53,16,1,21,60,0,77,240,0,21,192,0,52,12,16,7,0,0,12,0,4,0,0,0,0,0,68,0,0,5,0,0,65,48,0,64,0,0,0,0,0,0,0,0,0,0,0,16,0,0,64,0,0,16,0,192,0,0,0,0,0,192,0,64,48,192,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,12,0,12,0,192,3,12,192,3,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
