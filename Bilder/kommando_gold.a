!to "kommando_gold.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 63,42,71,42,80,43,36,43,32,45,70,45,32,48,95,48,0
SPRITE_COL  !by 1,12,2,6,15,8,13,14,15,15
SPRITE_BG   !by 243
SPRITE_MC   !by 225
SPRITE_XS   !by 114

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B236

CHAR        !by 128,128,128,128,128,168,179,188,195,203,211,129,139,146,153,160,169,145,189,196,204,212,130,140,147,154,161,170,180,190,197,205,213,131,141,148,155,162,171,181,191,198,206,214,132,142,149,156,163,172,182,192,199,207,215,133,133,133,133,133,173,183,193,200,208,216,134,134,134,134,134,174,174,174,174,174,174,135,143,150,157,164,175,184,147,145,145,145,136,144,151,158,165,176,185,194,201,209,217,137,145,145,145,166,177,186,145,145,145,218,138,138,152,159,167,178,187,187,202,210,159
CHAR_COL    !by 15,15,15,15,15,15,14,15,15,15,15,7,7,7,7,13,15,14,15,15,15,12,15,8,7,8,0,15,14,15,11,15,15,13,14,6,8,13,15,3,14,12,15,12,15,14,15,13,7,15,15,3,14,14,14,15,15,15,15,15,15,11,1,3,15,15,6,6,6,6,6,15,15,15,15,15,15,15,15,15,15,15,15,15,11,15,15,15,15,15,15,15,15,15,15,15,11,15,15,15,15,15,15,11,11,11,15,15,15,15,15,15,15,15,15,15,15,15,12,15,15
CHAR_DATA   !by 255,255,0,255,0,0,0,0,0,0,0,132,61,109,196,144,0,0,0,0,0,0,112,48,61,127,254,252,240,224,224,192,127,0,0,0,0,0,0,255,255,0,0,255,0,255,255,0,255,0,0,0,0,0,0,0,191,153,253,45,175,127,255,255,255,255,255,255,255,255,253,19,223,127,255,255,255,255,255,255,255,255,255,0,0,255,255,0,0,0,2,144,149,157,0,0,255,143,31,127,255,255,127,63,0,0,0,0,0,8,63,124,143,0,0,0,0,0,0,0,243,95,255,255,255,255,255,255,255,255,255,255,255,247,255,255,255,255,255,255,255,255,255,255,0,0,0,1,173,173,240,112,0,0,0,0,0,16,0,0,0,0,0,0,0,0,16,224,96,0,0,0,0,0,0,255,255,255,255,255,252,254,254,255,195,199,204,255,255,255,255,255,255,255,255,24,31,255,255,0,0,0,3,42,46,30,6,6,226,128,224,248,248,56,28,20,20,25,112,224,128,0,0,0,255,248,0,0,0,0,0,0,255,255,255,255,30,115,119,255,143,6,99,255,255,255,255,255,255,255,255,0,255,255,255,0,0,224,224,224,224,224,224,224,31,31,31,31,31,31,31,31,160,224,96,96,96,224,224,224,192,0,0,0,0,0,0,0,255,225,135,255,7,142,136,255,115,112,7,255,252,192,128,128,0,0,0,64,48,7,0,0,255,255,255,1,252,255,255,0,255,254,3,67,195,197,198,198,199,198,198,198,198,198,198,199,198,198,197,195,195,195,194,201,201,204,204,206,206,203,203,201,201,202,203,203,203,203,203,75,155,25,118,238,28,223,255,0,0,0,0,255,255,255,255,255,255,185,153,255,62,12,4,255,159,127,159,255,0,0,0,0,0,0,0,0,0,1,0,0,255,255,255,63,0,255,255,0,63,127,123,113,251,255,255,255,247,227,247,255,127,127,127,63,0,32,0,16,0,8,4,2,138,197,98,177,216,236,118,59,64,160,144,248,0,0,0,0,255,7,3,255,238,6,198,255,115,1,113,255,63,3,1,1,0,0,2,6,56,224,0,0,255,255,255,255,0,255,255,0,3,7,7,15,15,31,31,31,63,63,63,63,63,63,63,62,31,31,31,15,14,6,4,2,224,240,248,252,254,239,199,239,0,128,64,32,0,4,1,0,0,128,64,48,12,3,0,255,143,131,195,255,255,255,255,255,255,247,255,255,199,255,255,240,255,255,211,0,8,159,255,255,0,0,7,24,129,136,192,0,96,112,63,63,28,7,1,0,248,255,255,254,252,254,255,63,24,1,0,0,0,0,0,0,0,132,0,0,0,0,0,0,0,0,0,2,255,0,0,255,255,255,255,255,255,255,255,191,255,255,231,7,249,255,255,254,240,0,0,0,0,125,16,5,53,75,0,0,15,0,0,0,0,0,255,255,127,255,255,255,0,96,255,255,0,0,255,0,255,255,255,255,254,254,251,255,255,255,255,0,127,255,255,0,255,255,255,255,253,253,254,198,78,7,1,63,71,0,15,253,1,7,14,46,73,77,88,48,143,255,255,255,126,252,240,128,3,31,255,255,255,255,255,255,0,207,247,248,0,0,255,0,255,253,249,246,232,211,39,141,219,253,254,255,255,255,255,255
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,0,0,79,0,0,63,0,0,0,61,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,60,0,0,61,0,64,63,0,0,63,0,0,63,0,0,63,0,0,63,0,0,63,64,0,63,0,0,192,63,16,0,60,192,0,60,192,0,61,192,0,61,192,0,61,48,0,61,61,192,61,125,0,61,79,0,61,31,0,61,19,0,61,7,0,61,196,0,125,241,0,49,240,255,240,0,255,196,204,0,4,195,85,83,255,0,48,0,0,0,0,0,85,85,85,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,51,252,60,51,255,0,0,0,252,240,204,60,255,252,63,255,252,0,0,0,207,48,207,207,192,63,252,48,207,0,0,0,0,3,251,240,62,170,175,58,170,171,42,170,170,58,170,171,58,170,171,63,170,191,63,255,252,15,255,240,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,240,0,3,255,255,0,0,0,0,0,0,255,255,255,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,96,0,0,96,0,3,96,0,1,96,0,0,0,64,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,2,192,0,2,64,0,0,96,0,0,96,0,0,96,0,0,96,0,0,48,0,0,48,0,0,56,0,0,0,24,0,0,28,0,0,12,0,0,46,1,0,39,3,0,3,199,0,1,255,0,0,252,0,0,0,0,0,128,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,3,255,128,7,247,0,7,255,128,15,255,0,15,199,0,31,255,0,0,31,255,0,31,240,0,63,255,0,63,255,0,63,211,0,63,0,0,63,8,0,63,159,0,63,255,0,62,255,0,31,255,0,31,252,0,31,240,0,15,0,128,14,0,0,6,2,128,4,28,128,2,32,64,1,158,192,0,143,160,0,64,0,96,0,0,88,0,3,48,0,0,40,0,0,148,0,0,138,0,0,197,0,0,98,128,0,177,64,0,216,184,0,236,104,0,118,22,0,59,141,128,29,195,96,14,112,222,6,188,61,1,207,3,0,211,192,255,244,252,255,255,15,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,7,255,255,3,255,255,255,255,255,238,248,255,6,71,255,198,115,255,255,255,255,115,143,49,1,131,1,113,195,49,255,255,255,63,255,255,0,3,255,255,1,255,255,1,255,255,1,255,255,1,255,255,1,255,255,1,255,255,3,255,255,15,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,253,0,0,0,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,64,0,48,253,237,38,165,45,38,37,46,191,240,255,255,248,255,255,255,254,232,255,248,225,255,254,247,255,255,127,255,143,127,254,3,7,254,1,3,252,1,3,240,17,15,193,49,29,96,231,0,2,33,126,0,3,184,0,2,48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,128,159,254,128,108,65,128,0,1,128,0,1,128,0,3,128,0,1,128,0,1,192,220,7,192,220,7,192,200,3,64,224,51,64,224,57,192,184,125,192,56,125,128,120,253,128,113,239,128,241,219,128,225,199,64,193,143,64,0,128,143,128,128,63,128,128,63,128,128,127,64,0,60,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,160,0,6,131,0,250,128,0,122,128,0,58,131,0,58,128,0,58,128,0,58,131,195,0,58,128,0,58,128,0,58,131,48,58,143,243,58,143,240,58,143,0,58,128,0,58,140,15,58,128,48,56,128,195,58,131,15,58,140,63,58,128,61,58,128,192,54,143,68,62,173,83,62,175,112,62,175,127,62,163,255,62,163,255,61,171,243,0,62,171,255,61,168,255,61,138,60,63,170,0,55,170,130,55,106,170,55,106,170,51,234,170,49,218,42,61,250,170,61,246,170,255,118,170,211,125,40,208,204,65,31,223,3,95,243,255,48,52,255,0,5,0,85,85,85,0,0,0,255,255,255,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,63,0,0,0,0,0,207,252,0,255,240,0,255,240,0,0,0,0,255,255,192,195,255,192,255,255,195,0,0,3,204,0,12,3,0,12,0,192,61,0,0,0,15,0,192,3,3,192,0,195,0,0,255,0,0,252,0,0,252,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,85,255,255,192,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,170,170,170,170,170,170,255,255,255,170,170,175,0,0,15,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,0,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,0,0,142,0,1,143,0,0,143,0,0,15,128,0,15,192,0,15,192,0,15,128,0,15,0,3,15,42,0,142,42,0,142,170,160,14,168,32,14,168,128,13,0,168,128,13,255,195,205,0,0,14,0,0,14,0,0,14,0,0,14,0,0,14,170,170,174,170,170,174,255,255,255,255,255,250,170,170,170,85,85,87,170,170,170,170,170,170,85,85,85,0,0,0,255,255,255,255,255,255,170,170,170,170,234,170,0,169,170,170,254,170,170,250,234,170,235,170,170,222,170,187,186,170,235,122,170,170,234,190,238,234,175,239,170,175,255,170,170,170,170,254,190,170,255,186,170,255,238,170,170,170,170,170,191,171,170,192,186,170,192,122,170,128,234,170,128,234,170,128,0,170,170,176,170,170,191,170,170,191,170,170,175,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,255,213,94,85,106,191,170,170,170,170,170,170,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,170,170,170,174,170,170,170,170,170,170,170,170,190,170,171,170,170,171,170,170,170,175,250,190,170,170,171,170,170,171,191,174,170,0,255,254,175,255,235,171,186,170,170,170,170,171,234,170,255,170,172,15,171,240,62,172,3,254,240,15,254,192,255,223,195,233,223,249,93,219,245,93,255,186,93,235,190,127,255,63,255,255,63,255,255,15,254,191,3,255,255,0,255,252,0,63,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,96,0,0,218,32,170,249,170,166,255,170,171,191,255,255,107,255,255,86,170,170,85,85,85,0,0,0,255,255,255,255,255,255,170,170,170,170,170,170,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,234,170,170,170,170,170,170,170,170,170,170,170,255,170,170,191,170,171,255,170,171,170,170,174,170,170,237,170,170,245,170,171,246,170,170,189,170,170,187,170,170,171,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,171,85,85,255,234,170,170,170,170,170,170,170,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
