!to "unterbett.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 94,42,74,42,95,43,56,43,32,45,71,45,32,48,71,48,0
SPRITE_COL  !by 6,11,15,3,12,5,3,14,14,9
SPRITE_BG   !by 248
SPRITE_MC   !by 232
SPRITE_XS   !by 248

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B23E

CHAR        !by 128,128,128,128,128,128,128,128,128,128,128,129,137,143,150,157,167,176,183,192,201,210,130,138,144,151,158,168,177,184,193,202,211,131,131,131,131,159,169,169,185,194,203,212,132,139,145,152,160,170,178,186,195,204,213,133,140,146,153,161,171,179,187,196,205,214,128,128,128,128,162,128,128,188,197,206,180,134,134,134,134,163,172,180,189,198,207,128,128,128,147,154,164,173,128,128,128,128,215,135,141,148,155,165,174,181,190,199,208,216,136,142,149,156,166,175,182,191,200,209,217
CHAR_COL    !by 9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,11,11,11,11,11,12,12,12,12,8,8,11,1,1,1,1,1,15,1,1,8,8,12,5,5,5,5,12,5,5,5,0,11,11,5,5,5,5,5,5,5,5,11,6,6,5,5,5,5,15,12,6,6,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,14,14,14,6,6,6,6,6,6,14,6,14,14,14,6,6
CHAR_DATA   !by 255,255,255,255,255,255,255,255,255,255,255,255,255,235,255,255,253,255,223,255,255,0,0,0,255,255,255,255,255,255,0,0,0,0,249,255,0,0,0,0,0,0,0,205,255,255,255,255,255,255,255,255,0,0,0,0,255,255,255,223,255,255,155,255,255,255,63,126,127,253,63,191,251,255,255,255,255,127,255,255,255,223,239,223,127,0,0,0,0,0,159,255,0,0,0,0,0,0,0,191,255,255,255,255,251,223,255,249,255,127,251,255,247,255,123,126,255,147,126,115,255,255,255,255,255,252,191,239,255,254,110,255,255,0,0,0,0,0,60,255,0,0,0,0,0,0,0,237,255,255,255,255,255,255,255,255,255,255,255,247,255,239,255,255,255,247,155,255,251,57,173,191,253,147,79,31,247,255,255,255,255,127,255,255,255,251,191,231,255,0,0,0,0,0,51,255,0,0,0,0,0,0,0,240,255,255,255,255,255,255,255,255,255,127,255,255,255,239,255,31,255,255,249,255,255,253,221,252,255,251,237,111,255,255,255,255,251,223,127,235,63,255,239,253,254,0,0,0,0,0,0,0,0,7,7,0,0,0,248,255,0,0,0,0,0,16,32,32,64,64,128,128,127,127,127,127,127,127,127,191,0,32,16,0,0,0,0,0,255,255,255,255,255,255,255,254,191,63,239,253,253,111,255,254,0,24,0,0,28,95,0,1,255,255,255,223,255,239,254,207,223,255,191,206,255,0,0,0,0,0,0,0,0,255,255,0,0,0,7,40,160,0,0,0,0,0,0,15,255,255,255,255,0,0,0,12,0,0,0,0,255,255,255,255,255,255,255,253,254,191,127,253,255,255,207,255,191,239,75,255,255,231,235,233,255,255,127,255,255,251,255,249,255,255,255,221,255,0,0,0,0,0,28,253,232,0,0,0,0,0,0,177,255,255,255,255,0,0,0,0,255,255,255,255,0,0,0,64,16,64,131,160,0,12,4,80,16,80,130,0,255,255,255,191,255,254,255,222,127,253,254,247,255,0,0,0,0,0,0,0,96,224,224,16,0,0,17,251,240,0,0,0,0,0,0,236,236,248,248,248,248,248,252,252,254,255,254,253,3,7,31,127,255,255,255,255,32,0,96,128,8,0,1,0,0,0,170,32,0,0,119,27,255,255,255,255,255,237,253,187,210,255,255,254,223,0,0,0,0,0,0,0,0,0,1,1,0,0,0,6,6,14,15,1,240,240,32,192,232,40,192,192,191,119,63,126,240,12,0,0,0,0,0,0,240,159,113,0,16,0,0,8,2,0,128,128,24,0,25,140,2,65,28,17,255,255,255,255,255,255,191,191,253,255,255,159,251,0,0,0,0,0,0,0,0,0,128,192,192,134,252,92,12,28,28,12,56,60,60,62,60,252,124,124,0,0,0,0,249,255,255,255,0,0,0,0,0,192,64,0,227,255,255,191,190,255,255,253,255,235,155,248,234,139,115,49,255,255,255,255,238,255,255,255,1,0,0,5,0,255,127,31,15,199,195,3,3,131,7,7,204,4,2,17,9,129,138,115,1,1,1,3,15,255,255,127,255,255,255,127,255,255,255,255,255,255,247,231,63,191,254,255,199,255,124,254,219,127,247,230
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,3,160,0,4,192,0,0,12,12,0,12,28,0,12,12,0,12,12,0,6,24,0,1,226,0,8,12,0,4,62,0,0,63,0,0,123,0,0,113,0,0,65,0,0,65,0,0,35,0,0,158,0,0,64,0,16,4,0,0,4,0,0,24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0,1,1,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,7,255,255,191,255,135,62,224,136,56,16,8,0,108,92,47,255,255,239,255,255,239,255,255,207,255,255,196,255,255,152,255,255,208,193,56,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,192,0,15,112,0,8,184,0,22,28,0,39,134,0,39,228,70,118,36,230,126,4,38,118,50,76,18,28,56,0,11,230,0,4,130,2,1,129,0,17,8,0,49,4,0,17,64,0,17,69,0,40,185,4,34,65,0,97,124,0,193,7,0,0,6,0,97,200,0,1,128,0,65,128,0,65,192,0,0,65,192,0,66,192,0,3,128,0,131,128,133,0,0,56,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,12,0,0,192,192,3,0,0,204,195,63,12,48,3,15,195,255,12,192,207,48,0,48,204,192,48,243,255,51,3,0,12,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,207,0,255,255,12,255,255,12,255,0,0,0,0,12,0,0,15,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,138,42,143,170,170,143,170,170,191,170,170,143,170,170,143,0,174,170,179,174,170,128,170,170,131,170,170,131,170,170,173,170,170,169,170,170,165,174,170,181,170,170,165,170,170,181,170,170,213,170,191,213,85,85,81,85,85,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,21,85,85,85,85,85,84,69,85,81,69,85,17,21,85,81,21,85,20,69,85,84,85,85,81,85,85,69,21,85,84,85,85,85,21,85,69,21,85,5,5,85,69,85,85,85,85,85,68,5,85,5,5,85,21,5,85,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,224,255,255,255,255,255,255,255,255,255,60,154,62,0,0,2,255,255,247,255,255,255,255,255,239,255,255,223,255,255,223,255,255,255,255,255,191,88,83,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,192,192,0,0,0,3,51,15,0,12,3,192,243,207,192,192,207,240,0,48,0,192,12,0,255,48,192,192,12,48,255,255,255,255,255,255,255,255,195,255,255,195,255,255,207,255,207,207,255,195,63,255,192,51,0,0,0,63,0,0,63,0,3,3,0,12,3,0,12,3,0,12,0,0,12,0,0,0,3,0,0,15,0,0,15,0,0,192,0,0,48,0,3,48,0,63,240,0,3,243,0,3,243,0,63,255,0,3,255,0,3,255,0,51,255,0,0,255,0,0,3,255,0,3,255,0,15,85,0,3,85,0,5,85,0,53,85,0,21,85,0,21,85,0,213,85,63,213,85,85,85,85,85,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,89,85,85,85,85,85,85,85,85,85,0,165,85,85,89,85,101,149,85,85,149,85,86,101,85,150,85,85,153,85,85,89,165,85,85,149,85,101,149,85,90,101,85,101,165,85,170,85,85,105,85,85,106,101,85,169,101,102,166,101,101,166,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,12,0,0,48,252,60,204,0,192,195,0,192,252,48,0,204,12,51,0,204,252,204,12,15,63,12,0,48,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,240,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,0,192,0,0,0,0,0,0,0,0,3,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,89,85,85,85,85,85,101,85,86,85,149,89,153,149,0,85,85,149,150,89,101,85,85,101,89,101,149,166,166,85,85,85,85,86,101,85,85,166,85,154,170,89,170,150,85,149,101,85,106,166,101,154,154,85,154,153,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,0,170,170,170,170,170,170,170,171,170,170,170,170,171,174,170,170,171,170,170,170,170,170,170,170,174,170,234,170,170,170,255,255,255,255,255,255,255,255,195,255,255,195,255,255,207,255,239,207,255,235,63,255,234,179,0,42,191,0,42,63,0,35,3,0,0,14,163,0,14,131,0,14,128,0,14,128,0,10,171,0,10,143,0,2,143,0,34,224,0,34,186,0,35,176,0,63,248,0,3,251,0,3,243,0,63,255,0,3,255,0,3,255,0,51,255,0,0,255,0,3,255,0,3,255,0,15,85,0,0,3,85,0,5,85,0,53,85,0,21,85,0,21,85,0,213,85,63,213,85,85,85,85,85,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
