!to "sonderangebot2.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 38,42,55,42,36,43,90,43,85,45,37,45,54,48,64,48,0
SPRITE_COL  !by 12,15,11,10,0,15,1,1,14,11
SPRITE_BG   !by 246
SPRITE_MC   !by 242
SPRITE_XS   !by 228

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B2A6

CHAR        !by 128,128,128,128,128,162,172,181,189,128,128,128,128,138,144,152,163,173,182,190,128,128,128,128,139,145,153,164,174,183,191,128,128,128,132,140,146,154,165,175,184,192,197,128,128,133,141,147,155,166,176,185,193,198,128,128,134,128,148,156,167,177,186,194,199,128,128,135,128,149,157,168,178,128,195,200,128,129,136,142,150,158,169,179,187,196,201,197,130,137,143,151,159,170,180,188,181,202,203,131,128,128,128,160,171,128,128,128,128,204,128,128,128,128,161,128,128,128,128,128,128
CHAR_COL    !by 0,0,0,0,0,11,11,11,11,0,0,0,0,15,1,1,1,10,10,1,0,0,0,0,15,1,1,1,14,14,6,0,0,0,12,12,1,14,14,14,14,1,12,0,0,15,11,1,14,14,14,1,1,12,0,0,12,11,1,1,1,1,1,1,12,0,0,15,11,1,1,1,1,1,1,12,0,12,12,12,12,1,1,1,1,1,1,12,15,15,15,12,1,1,11,11,11,12,12,15,0,0,0,15,12,0,0,0,0,15,0,0,0,0,15,0,0,0,0,0,0
CHAR_DATA   !by 255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,1,0,1,1,1,1,3,3,2,2,6,6,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,3,3,2,2,0,0,10,10,0,0,20,20,24,24,16,16,48,48,48,32,0,0,0,160,128,0,0,65,135,190,224,0,0,0,0,0,0,0,0,0,1,7,12,28,28,30,22,50,50,34,35,99,2,162,160,0,0,65,64,0,127,127,127,127,255,255,255,255,0,0,0,0,0,3,16,130,224,0,0,0,0,0,0,0,0,0,0,0,15,255,255,255,255,176,106,3,63,255,255,255,255,243,96,112,120,120,120,56,56,56,56,24,28,30,31,31,15,15,15,15,7,7,7,6,4,0,0,2,2,1,1,1,4,4,0,4,32,6,32,0,1,1,0,0,0,0,0,0,0,0,15,255,255,255,255,228,64,21,191,255,255,255,248,192,127,255,255,255,255,240,240,240,249,255,255,255,255,255,255,63,224,255,255,255,255,255,239,199,231,102,102,103,7,15,255,255,255,255,255,255,255,255,127,127,127,127,127,63,63,63,63,31,99,63,48,32,48,48,16,16,16,24,24,8,8,0,0,0,0,0,0,0,0,0,3,32,7,255,255,255,255,244,129,163,191,255,255,255,248,0,0,0,255,255,254,248,248,248,254,255,255,255,255,255,255,255,255,248,31,255,255,255,240,192,196,192,230,38,96,231,255,255,255,255,255,255,255,255,252,132,146,146,147,223,255,255,255,255,252,192,6,224,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,2,52,170,136,0,0,0,1,63,127,255,255,255,255,252,252,126,63,127,255,255,255,255,255,255,255,252,192,0,255,255,240,224,206,206,206,70,96,123,255,255,255,255,255,255,255,255,253,209,147,147,11,31,0,0,0,0,0,0,1,16,0,0,0,8,128,0,0,0,0,1,170,12,96,0,0,0,0,0,240,252,255,255,255,255,63,31,31,63,255,255,255,255,0,0,0,3,15,255,255,255,240,224,198,71,7,38,32,123,255,255,247,230,254,254,255,255,0,0,0,0,0,0,128,0,0,0,0,0,32,32,0,0,192,64,64,192,224,224,224,224,0,0,0,0,0,64,64,0,28,28,28,14,6,14,14,63,63,127,255,255,255,255,248,192,193,121,57,57,56,63,127,255,255,255,255,255,255,252,140,164,34,131,230,207,255,255,255,255,0,0,0,0,0,0,128,128,0,64,64,0,0,0,32,32,0,0,16,16,0,0,8,8,0,0,4,4,0,192,2,32,28,60,126,254,254,254,255,240,0,26,128,1,1,0,0,0,128,128,0,64,64,0,160,160,96,32,0,0,0,0,0,0
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,32,0,0,0,0,4,0,0,0,0,0,0,0,0,8,0,0,8,0,0,0,0,0,2,0,0,18,0,0,19,0,0,3,0,0,7,0,0,39,0,0,7,0,0,0,7,128,0,15,128,0,15,128,0,79,128,0,15,192,0,31,192,0,31,192,0,159,192,0,31,192,0,31,224,0,63,224,1,63,224,0,63,224,0,63,240,0,127,240,2,127,240,0,127,240,0,127,240,0,255,248,4,255,248,0,255,248,0,0,255,248,1,255,252,9,255,252,1,255,252,1,255,252,3,255,252,3,255,254,19,255,254,3,255,254,7,255,254,7,255,254,39,255,255,7,255,254,15,255,240,15,255,0,79,248,4,15,128,64,28,2,0,0,0,0,129,0,0,16,0,0,0,32,0,0,32,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,124,0,19,192,1,252,0,31,192,0,252,0,0,192,0,14,0,0,62,0,14,174,0,238,224,63,187,0,138,176,0,254,0,0,224,0,3,0,0,199,192,0,0,192,48,0,192,0,0,205,0,0,0,199,0,0,204,0,0,192,0,3,192,7,64,192,15,192,240,15,192,240,3,0,112,0,0,112,0,0,48,0,0,48,0,0,0,0,0,0,0,0,48,48,0,60,12,48,60,0,0,28,0,0,28,0,0,12,0,13,12,0,19,12,12,49,0,12,240,48,13,0,0,15,0,112,15,0,192,7,0,12,7,48,0,3,76,0,3,0,0,3,0,0,3,0,0,3,0,0,3,192,0,3,192,0,31,192,3,253,192,55,240,192,23,0,192,29,0,192,13,0,192,48,0,192,0,0,48,0,0,0,48,0,0,48,0,0,48,3,0,48,63,0,48,253,0,31,208,0,21,0,0,48,0,0,0,0,0,12,0,0,4,0,0,4,0,0,4,0,0,12,0,0,12,0,0,4,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,248,255,255,224,255,255,128,255,254,0,255,248,0,255,192,0,255,0,0,255,0,0,255,0,0,255,0,0,254,0,0,254,0,0,254,0,0,254,0,0,254,0,0,254,0,0,252,0,0,254,0,0,252,0,0,252,0,0,252,0,0,0,252,0,0,252,0,0,252,0,0,252,0,0,252,0,0,252,0,0,248,0,0,248,0,0,248,0,0,248,0,0,248,0,0,240,0,0,240,0,0,240,0,0,240,0,0,240,0,0,240,0,0,240,0,0,240,0,17,240,0,16,240,1,21,0,240,5,18,224,4,8,224,4,136,224,4,128,224,2,0,224,2,0,224,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,0,192,0,1,192,8,5,192,60,0,192,252,0,193,252,0,135,252,0,159,252,0,191,252,0,0,191,252,0,191,252,0,63,252,0,63,254,3,191,254,15,255,254,127,127,254,255,255,254,255,255,254,255,255,254,255,255,254,255,255,254,255,255,255,255,255,255,127,255,255,127,255,255,127,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,225,0,0,1,0,0,0,1,0,0,1,128,0,4,128,0,18,128,0,6,128,0,200,192,0,0,64,0,0,64,0,0,64,0,0,96,0,0,32,0,0,32,0,32,32,0,0,16,0,3,144,0,0,16,0,0,144,0,0,136,0,0,8,0,0,8,0,0,8,0,0,0,64,0,0,36,0,0,4,0,0,196,0,0,0,0,1,2,0,2,2,0,4,2,0,16,1,0,192,1,0,0,1,0,0,19,0,0,4,0,52,232,128,24,0,128,164,0,0,160,0,0,160,20,64,5,0,64,66,0,0,16,0,0,0,0,0,32,0,0,32,0,0,0,0,0,0,0,0,16,0,8,16,1,4,144,0,68,24,2,82,136,0,82,8,32,64,0,0,0,0,0,0,4,4,0,4,0,0,0,0,0,60,0,7,252,0,127,132,7,240,6,127,0,2,240,0,2,0,0,0,3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,7,172,0,58,172,0,170,164,0,170,172,0,0,170,188,0,170,188,0,174,188,0,255,236,0,242,168,0,250,171,0,170,169,0,170,171,0,170,170,0,170,170,0,195,170,0,0,106,0,0,62,0,0,2,192,0,14,64,0,2,128,52,2,192,112,2,192,240,2,192,60,3,128,0,3,128,0,0,2,176,0,3,176,0,2,144,0,14,176,0,10,176,0,58,176,0,234,160,3,170,160,250,170,160,170,170,92,170,164,104,171,127,40,168,202,104,124,134,40,28,130,40,140,130,40,140,142,171,140,10,170,154,234,170,26,170,170,234,170,170,0,170,170,170,170,170,170,170,170,170,170,170,218,170,165,98,170,160,98,170,176,210,170,164,242,235,168,154,41,149,170,106,138,170,42,186,170,106,170,170,170,170,171,170,170,191,170,171,253,170,191,80,171,245,0,191,80,0,240,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,4,0,0,30,0,0,0,58,0,0,234,0,7,170,0,62,170,0,122,171,1,234,175,3,170,187,3,171,186,3,171,234,3,191,170,1,234,170,3,122,171,3,106,160,1,170,128,1,234,0,3,232,0,3,232,0,7,232,0,7,224,4,15,224,0,15,224,13,0,13,225,192,13,227,196,12,227,192,12,224,192,12,96,0,4,96,0,4,48,0,12,48,0,12,0,0,4,8,3,4,43,2,12,58,58,12,58,170,28,58,171,28,58,169,60,58,173,60,58,146,52,58,180,52,59,131,48,57,132,48,60,146,0,16,61,246,16,23,186,48,20,170,48,13,170,48,14,170,16,14,170,48,10,170,48,10,170,48,14,170,112,14,168,112,62,172,240,118,179,243,254,159,215,206,148,221,14,138,212,14,170,208,14,170,64,14,170,64,14,170,192,6,171,192,6,175,0,64,3,189,64,2,176,192,3,192,192,3,64,64,1,0,0,3,0,0,3,0,0,1,0,0,1,0,0,0,0,0,3,0,0,3,0,0,3,64,0,3,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,60,0,1,204,0,7,12,0,28,12,0,48,12,0,192,60,15,0,204,0,124,3,252,240,3,192,192,63,192,0,243,0,3,51,0,15,192,0,252,192,3,204,3,161,240,14,167,192,58,175,192,234,170,195,170,171,194,170,171,202,170,170,250,170,218,218,170,218,234,158,234,250,174,170,250,158,170,235,234,171,235,234,168,0,234,170,168,234,170,168,250,170,168,250,170,160,250,170,176,122,170,192,122,171,3,62,156,0,50,176,60,48,0,0,48,3,192,48,3,65,48,61,3,48,17,0,51,52,0,63,15,112,53,4,0,60,211,0,61,244,0,55,48,0,60,0,0,0,63,0,0,60,0,13,60,0,0,28,0,0,28,0,4,12,0,240,28,0,213,60,13,0,252,208,12,220,95,0,76,87,0,12,192,0,12,48,3,12,0,15,12,0,60,12,0,240,12,3,192,12,15,0,3,60,0,15,240,0,7,192,0,0,7,0,0,3,0,0,3,0,0,3,0,0,1,0,0,1,0,0,0,0,0,3,0,0,0,0,0,1,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,15,0,0,188,0,2,240,0,7,192,0,47,3,0,112,3,128,192,15,64,0,0,63,192,0,48,192,3,240,192,12,192,192,243,192,192,240,0,0,240,0,0,192,51,0,0,193,0,3,0,192,13,0,0,48,0,192,192,0,192,0,12,0,0,60,16,1,60,16,3,252,208,3,192,48,51,192,48,49,0,240,48,0,0,0,48,0,192,0,0,192,0,3,0,0,3,0,0,12,0,0,48,8,0,192,16,195,0,128,204,3,192,0,6,152,0,51,36,0,147,132,3,83,140,6,114,12,205,178,192,254,251,0,18,64,0,173,176,0,254,0,0,207,0,0,144,0,0,0,64,0,54,0,0,120,0,0,168,0,0,136,0,0,106,0,51,229,0,213,65,3,210,3,14,227,3,199,208,0,197,192,3,203,0,63,204,0,254,192,3,240,192,15,192,192,63,0,192,244,0,195,208,0,143,64,0,254,0,0,248,0,0,0,208,0,0,192,0,0,192,0,0,224,0,0,208,0,0,208,0,0,144,0,0,240,0,0,224,0,0,112,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
