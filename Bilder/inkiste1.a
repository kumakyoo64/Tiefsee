!to "inkiste1.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 24
CHAR_COL1   !by 9
CHAR_COL2   !by 8
SPRITE_POS  !by 69,42,90,42,33,43,95,43,32,45,32,45,95,48,41,48,0
SPRITE_COL  !by 8,9,8,12,8,0,8,12,11,11
SPRITE_BG   !by 25
SPRITE_MC   !by 226
SPRITE_XS   !by 128

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B246

CHAR        !by 128,138,138,138,164,174,174,187,138,138,208,129,139,149,149,165,175,175,188,149,201,209,130,140,150,150,166,176,176,189,150,202,210,131,141,151,158,167,177,177,190,196,203,211,132,142,152,159,168,178,183,191,197,197,212,133,143,153,160,169,179,184,192,198,204,213,134,144,154,161,170,170,170,170,170,170,214,135,145,155,162,171,180,185,193,199,205,215,136,146,156,163,172,181,186,194,200,206,216,137,147,157,157,173,182,182,195,157,207,157,137,148,157,157,173,182,182,195,157,148,157
CHAR_COL    !by 8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,0,0,8,8,8,8,8,8,8,8,8,0,0,8,8,8,8
CHAR_DATA   !by 10,202,250,58,222,254,254,30,14,126,30,62,194,254,30,50,222,254,62,14,190,126,62,46,30,30,46,174,46,46,45,0,85,234,234,37,42,233,234,250,122,122,117,122,121,122,112,117,70,117,117,118,245,213,218,21,21,213,213,195,213,81,199,115,212,0,0,0,85,42,85,42,42,42,42,42,42,42,42,42,170,170,170,85,170,170,170,85,170,170,170,149,170,170,170,170,149,170,170,170,85,170,170,170,85,170,170,170,170,169,87,0,85,170,170,170,153,170,170,90,165,170,86,170,85,170,0,85,169,85,86,165,85,101,85,85,85,85,85,85,245,85,252,85,255,119,255,0,85,154,85,170,170,154,170,170,153,191,179,191,153,170,170,170,170,170,170,170,170,170,170,85,170,170,170,170,85,170,170,170,85,170,170,170,85,170,170,170,170,90,245,48,85,170,170,170,170,170,154,170,101,170,165,170,85,170,0,149,90,85,149,85,85,85,85,85,85,85,85,85,85,85,245,85,95,245,127,0,85,170,85,170,170,170,170,170,170,170,170,170,85,170,170,170,170,170,85,0,85,170,170,170,170,170,170,149,170,170,85,170,169,170,0,85,149,85,85,85,85,85,85,85,85,85,85,85,85,21,117,64,85,1,84,0,85,170,85,170,160,160,160,85,160,160,160,85,160,160,160,85,160,160,160,160,85,160,160,160,85,160,160,160,85,160,160,160,160,160,85,0,85,160,160,160,160,160,160,104,160,160,85,160,85,160,0,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,95,5,21,80,21,0,85,160,85,160,160,160,160,160,160,160,160,160,0,0,0,85,0,0,0,85,0,0,0,85,0,0,0,0,85,0,0,0,85,0,0,0,85,0,0,0,0,0,85,0,85,0,0,0,0,0,0,0,0,0,85,0,85,0,0,85,85,85,85,85,85,87,213,127,85,255,127,0,85,0,85,0,0,0,0,0,0,0,0,0,85,0,0,0,0,0,0,4,0,0,85,0,69,0,0,85,85,85,85,85,85,93,85,125,95,221,125,0,85,0,85,0,2,2,2,85,2,2,2,85,2,2,2,85,2,2,2,2,85,2,2,2,85,2,2,2,85,2,2,2,2,2,85,0,85,2,2,2,2,2,2,2,2,2,82,2,85,2,0,85,85,85,85,117,85,77,85,85,84,69,240,0,85,2,85,2,2,2,2,2,2,2,2,2,85,170,170,170,170,165,80,0,85,170,170,170,170,170,170,170,90,170,170,150,170,165,0,85,85,85,85,64,85,85,80,1,84,16,0,0,85,170,85,170,170,170,170,86,170,170,170,170,86,170,170,170,85,170,170,170,85,170,170,170,170,106,21,192,170,170,170,169,85,85,0,85,85,84,5,21,80,5,64,21,4,0,0,0,85,170,85,170,170,170,170,169,153,128,128,128,160,161,161,160,129,128,132,129,129,128,132,132,129,128,132,129,129,129,129,130,129,129,130,138,138,134,134,137,138,138,74,0,85,168,168,168,168,169,169,169,161,161,81,81,81,1,1,81,81,81,81,81,81,85,85,64,84,20,84,64,20,64,84,0,0,0,0,0,85,170,85,170
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,0,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252,127,255,255,255,255,255,255,0,0,1,255,255,255,0,6,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,97,129,184,0,0,3,199,0,0,0,192,13,57,128,5,231,148,0,0,0,0,0,0,0,255,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,85,85,85,85,85,85,85,85,255,255,252,85,85,85,0,85,85,85,85,85,85,255,255,253,85,85,85,85,85,85,85,85,85,255,255,241,85,85,85,85,85,85,85,85,85,85,85,85,255,255,241,85,85,85,85,85,85,85,85,85,255,255,253,85,85,85,85,85,85,85,85,85,255,255,252,85,85,85,0,85,85,85,85,85,85,85,85,85,85,63,85,255,192,255,0,42,0,255,255,255,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,87,213,85,85,85,85,213,85,83,85,241,95,252,87,255,85,63,252,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,240,255,252,63,255,0,255,243,255,192,63,252,63,255,195,3,252,12,252,243,240,48,60,192,0,192,0,0,0,0,0,0,255,255,255,85,85,5,255,255,255,85,85,85,85,85,65,85,85,85,85,85,21,85,85,93,85,84,220,85,85,1,85,85,1,85,85,1,85,84,220,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,255,255,31,255,255,31,255,255,28,0,0,15,255,255,15,255,255,0,15,255,255,14,0,0,15,255,255,15,255,255,15,255,255,7,0,0,7,255,255,7,255,255,7,255,255,7,255,255,15,0,0,15,255,255,15,255,255,143,255,255,142,0,0,15,255,255,79,255,255,47,255,255,140,0,0,143,255,255,207,255,255,0,207,255,255,207,255,255,111,240,31,224,0,0,0,0,0,0,0,0,255,255,255,255,255,255,97,255,255,127,145,255,121,255,255,127,255,143,60,31,255,63,224,97,63,255,255,32,7,192,31,255,255,16,0,0,31,255,255,0,0,0,0,1,128,0,7,240,31,0,0,0,0,7,128,3,192,0,0,0,0,0,32,0,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,157,255,0,0,0,255,255,255,255,253,255,255,159,255,255,251,255,255,255,255,255,24,255,255,129,255,255,129,255,255,129,255,255,24,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,5,0,0,6,0,0,5,0,0,15,0,0,12,0,0,0,9,0,0,15,0,0,15,0,0,12,0,0,9,0,0,25,0,0,18,0,0,20,0,0,25,0,0,31,0,0,15,0,0,10,0,0,10,0,0,14,0,0,12,0,0,12,0,0,12,0,0,10,0,0,8,0,0,8,0,0,8,0,0,0,8,0,0,8,0,0,10,7,192,8,248,63,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,3,0,0,2,0,0,2,0,0,2,0,0,4,0,0,124,255,255,252,0,0,4,0,0,0,4,0,0,2,0,0,2,0,0,2,0,0,3,0,0,1,0,0,1,0,0,13,0,0,1,0,1,225,0,48,0,15,192,15,128,3,192,0,48,28,3,143,0,60,64,115,128,241,255,35,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,31,128,0,16,128,0,31,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,255,255,143,255,255,159,255,255,30,0,0,79,255,255,175,255,255,159,255,255,15,0,0,0,15,255,255,31,255,255,15,255,255,39,128,0,131,255,255,151,255,255,7,255,255,19,255,255,79,128,0,111,255,255,175,255,255,207,255,255,95,0,0,31,255,255,191,255,255,159,255,255,206,0,0,207,255,255,239,255,255,111,255,255,239,255,255,0,191,248,15,248,3,224,0,0,16,0,0,0,255,255,255,255,255,255,48,255,255,63,200,255,124,255,255,127,255,199,126,15,255,63,240,48,63,255,255,48,3,224,31,255,255,24,0,0,31,255,255,16,0,0,16,0,192,3,248,15,32,0,0,0,32,3,192,33,224,0,96,0,0,64,16,0,78,0,0,0,0,0,0,0,0,128,0,0,128,0,0,130,0,0,128,112,0,0,0,0,65,164,112,18,0,0,128,118,6,0,17,224,0,102,30,0,0,0,0,0,0,255,206,255,0,0,0,0,255,255,255,255,254,255,255,207,255,255,253,255,255,255,255,255,140,127,255,255,255,255,225,255,255,255,255,255,140,127,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,85,85,197,85,85,245,85,85,55,255,255,245,85,85,245,85,85,245,85,85,53,255,255,0,5,85,85,245,85,85,53,85,85,61,255,255,193,85,85,253,85,85,61,85,85,49,85,85,245,255,255,245,85,85,245,85,85,69,85,85,245,255,255,245,85,85,213,85,85,245,85,85,119,255,255,117,85,85,117,85,85,245,85,85,117,85,85,0,213,95,245,95,252,63,0,2,160,255,255,255,85,85,85,85,85,85,31,85,85,21,127,85,215,85,85,213,85,125,215,245,85,213,95,223,213,85,85,223,253,127,245,85,85,255,255,255,245,85,85,240,0,0,255,255,127,205,95,245,255,255,255,0,255,253,127,255,127,255,255,255,255,255,255,255,247,255,255,63,255,255,63,255,255,255,255,255,255,255,255,195,255,255,255,207,255,243,255,255,207,252,15,243,255,255,252,15,255,0,255,63,0,63,243,0,0,0,255,255,255,85,119,85,255,255,255,0,85,85,85,85,87,85,85,117,85,85,87,85,85,85,85,85,247,213,85,64,85,85,64,85,85,64,85,85,247,213,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,85,87,85,85,87,85,85,87,255,255,215,85,85,80,85,85,83,85,85,95,255,255,208,85,85,80,85,85,83,85,85,95,0,255,255,95,85,85,95,85,85,95,85,85,95,85,85,80,255,255,80,85,85,95,85,85,95,85,85,83,255,255,211,85,85,83,85,85,83,85,85,95,255,255,215,85,85,92,85,85,92,85,85,93,85,85,93,95,245,87,252,63,245,0,0,0,0,255,255,255,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,253,85,84,85,85,87,85,85,255,127,87,255,213,255,255,95,255,195,0,0,3,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252,0,255,255,255,255,255,255,255,255,243,255,255,255,255,255,63,255,207,255,240,63,240,255,252,63,255,207,243,252,240,255,195,255,204,255,15,0,252,0,0,0,0,0,0,0,0,255,255,255,85,93,85,255,255,255,85,85,85,85,87,85,85,85,85,0,85,117,85,85,87,213,85,127,213,85,80,85,85,90,85,85,80,85,85,127,213,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,85,85,85,85,85,85,85,85,255,255,255,85,85,85,85,85,85,85,85,85,255,255,255,85,85,85,85,85,85,85,85,85,0,255,255,255,85,85,85,85,85,85,85,85,85,85,85,85,255,255,255,85,85,85,85,85,85,85,85,85,255,255,255,85,85,85,85,85,85,85,85,85,255,255,255,85,85,85,85,85,85,85,85,85,85,85,85,125,85,85,255,255,255,0,0,0,0,255,255,255,85,85,85,85,85,85,85,85,85,245,85,85,85,85,85,93,85,85,213,49,95,127,85,85,85,85,85,223,255,255,85,85,85,255,79,255,85,85,85,0,0,0,255,255,255,125,63,255,255,255,255,223,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252,255,255,207,243,255,255,3,255,255,195,255,255,12,255,255,207,255,0,0,0,255,255,255,213,85,85,255,255,255,85,85,85,85,85,85,213,85,85,0,85,85,85,85,85,85,245,85,85,85,85,85,165,85,85,85,85,85,245,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
