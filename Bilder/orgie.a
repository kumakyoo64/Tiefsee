!to "orgie.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 32,42,94,42,32,43,41,43,49,45,71,45,32,48,61,48,0
SPRITE_COL  !by 5,15,1,10,3,10,12,1,9,3
SPRITE_BG   !by 252
SPRITE_MC   !by 224
SPRITE_XS   !by 252

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B306

CHAR        !by 128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,128,129,134,140,146,153,160,166,173,180,128,128,130,135,141,147,154,161,167,174,181,186,190,131,136,142,148,155,128,168,175,182,187,191,132,137,143,149,156,162,169,176,183,188,128,133,138,144,150,157,163,170,177,184,189,192,128,139,145,151,158,164,171,178,185,179,128,128,128,128,152,159,165,172,179,128,128,128,128,128,128,128,128,128,128,128,128,128,128
CHAR_COL    !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,12,12,3,13,13,10,9,9,0,0,12,13,13,7,10,3,3,3,9,9,10,12,10,10,1,1,3,3,1,1,3,7,9,10,7,1,3,1,1,10,12,12,5,9,12,9,15,5,9,12,10,12,9,5,0,9,9,5,9,5,12,9,9,9,0,0,0,0,9,9,9,9,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0
CHAR_DATA   !by 255,255,255,255,255,255,255,255,0,0,0,0,0,112,1,0,0,0,0,128,0,0,0,192,128,32,32,192,0,0,0,128,0,128,192,248,254,255,255,255,255,255,255,255,63,15,7,1,0,0,0,0,0,0,152,3,0,7,255,255,255,63,28,28,248,252,28,31,15,7,1,0,0,0,6,6,28,60,60,48,12,0,0,0,0,0,0,0,127,15,3,1,0,0,0,0,0,0,0,0,0,0,63,143,0,0,192,224,224,192,0,0,30,31,31,22,143,199,192,0,0,0,0,24,50,20,13,8,0,0,192,240,240,248,255,255,255,255,255,255,127,15,3,0,0,0,0,0,0,1,15,3,0,0,0,0,0,7,6,14,0,0,0,0,0,3,223,192,224,32,0,0,0,0,0,0,253,60,0,0,0,0,0,0,1,0,0,0,0,0,0,0,63,3,0,0,0,0,0,0,0,0,0,0,0,1,0,192,29,23,31,13,15,7,98,240,0,0,0,0,192,192,192,0,255,255,255,255,255,255,254,255,0,0,0,0,140,8,208,248,16,208,224,228,252,252,255,255,255,255,255,7,1,0,0,0,0,0,0,0,0,128,32,32,0,1,1,15,63,57,255,255,0,0,3,15,63,55,192,64,58,10,8,72,136,0,0,0,240,224,220,253,255,255,255,7,249,255,255,255,255,127,0,0,0,0,0,1,3,7,7,14,0,224,2,255,255,255,255,255,255,255,255,254,240,240,224,224,15,63,255,252,244,244,224,64,0,3,7,135,199,195,193,199,207,252,252,60,60,126,124,12,7,190,252,240,192,128,0,0,0,0,0,0,0,1,3,0,0,64,126,255,255,255,255,255,31,255,255,255,255,255,126,254,0,0,0,0,224,112,56,30,15,12,24,16,0,0,0,0,0,0,0,1,7,62,124,240,192,0,0,0,0,0,0,0,0,0,0,0,0,192,240,16,8,12,7,0,0,0,0,0,128,247,243,227,227,225,0,0,0,0,7,103,192,192,128,128,128,128,0,0,128,128,0,2,3,14,120,224,128,0,0,0,0,64,128,0,0,0,0,0,224,96,0,48,24,248,192,0,16,128,0,224,32,0,0,0,0,0,0,0,0,1,60,96,50,30,15,6,14,14,12,12,0,64,120,56,56,48,16,112,255,255,255,224,32,0,0,0
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,0,0,127,0,0,63,0,0,28,0,0,104,0,0,32,0,0,32,0,0,32,0,0,24,0,0,30,0,0,14,0,0,255,0,0,126,0,0,14,6,61,0,0,31,31,0,7,248,0,15,246,0,8,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,168,0,0,252,0,12,124,0,7,14,0,3,7,192,1,0,62,3,0,63,131,0,28,3,0,0,3,0,0,3,2,0,227,2,1,225,7,1,177,7,0,241,3,0,240,99,0,120,0,59,0,0,63,0,0,15,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,0,0,120,0,0,224,192,3,128,248,1,0,248,0,0,172,0,1,0,0,0,0,0,3,144,0,7,120,0,4,56,0,15,56,0,31,96,0,31,48,0,63,28,0,63,28,0,255,12,0,127,30,14,127,94,16,127,252,7,255,0,62,55,255,24,63,255,13,239,254,5,207,252,1,135,248,0,135,248,0,71,224,0,7,248,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,3,0,0,2,0,3,2,0,5,6,0,3,0,0,7,0,0,1,128,0,3,128,128,66,0,128,88,0,134,88,0,198,88,0,198,88,0,103,64,0,115,192,0,115,0,0,51,0,0,24,0,0,0,0,0,0,0,0,0,0,0,0,35,0,0,35,0,0,103,128,1,71,128,4,66,0,4,64,0,4,0,16,36,0,56,224,0,48,196,0,48,12,0,112,12,0,48,14,0,32,14,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,104,0,0,128,0,1,0,0,0,4,40,0,112,80,0,56,20,0,0,132,0,0,128,0,0,8,0,0,12,0,0,0,0,32,0,0,16,0,0,16,0,0,138,64,0,0,0,0,129,0,0,131,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,2,0,10,3,0,1,9,96,1,13,120,8,26,102,10,48,68,27,32,64,239,190,49,255,190,12,245,158,6,48,190,1,247,252,0,119,216,0,107,208,0,66,68,0,0,204,0,0,232,0,0,192,0,0,4,0,0,2,64,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,192,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,64,0,0,64,0,0,82,176,0,75,140,0,0,0,0,0,0,192,240,0,0,192,0,240,0,0,47,0,32,43,0,170,171,0,171,162,0,170,162,2,170,179,2,168,179,2,163,51,2,163,255,0,175,253,2,175,21,0,42,188,85,40,61,21,168,53,85,184,245,85,143,197,85,15,197,85,207,197,85,207,85,85,252,85,85,252,85,84,0,5,84,0,5,80,80,5,64,84,21,64,80,85,0,65,84,0,81,84,0,85,80,0,85,64,0,84,64,0,85,64,0,0,21,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,192,0,3,48,60,12,224,15,69,164,0,13,85,68,207,85,69,192,85,71,192,85,64,192,85,64,192,244,95,193,244,80,193,244,16,177,126,0,65,78,192,65,78,192,192,76,192,0,15,0,192,252,0,192,12,0,192,192,0,112,0,0,124,0,0,80,0,0,151,0,0,151,0,0,0,167,192,3,169,204,10,169,252,10,169,127,206,170,79,254,170,84,255,170,148,255,42,148,106,42,165,16,10,169,69,10,169,85,2,170,132,2,170,70,0,170,149,0,170,149,0,42,149,0,42,149,0,10,165,0,10,169,0,2,170,0,0,170,0,0,0,170,0,0,10,0,0,10,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,56,0,0,40,0,0,236,0,0,180,0,0,129,0,0,0,81,0,0,65,163,192,81,254,240,82,170,176,82,170,168,30,234,168,30,170,171,22,170,170,10,170,42,58,168,2,58,168,12,234,168,2,234,160,2,170,160,58,42,168,43,170,160,191,170,160,207,170,162,253,170,131,245,170,11,209,170,59,213,0,171,11,85,168,207,21,168,60,21,235,60,21,252,253,85,60,241,85,63,245,85,84,0,85,16,0,85,81,64,85,81,64,84,69,1,84,21,5,80,5,69,64,5,85,64,5,69,0,5,68,0,5,68,0,0,84,0,0,80,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
