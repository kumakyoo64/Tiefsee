!to "insel.prg", cbm

!src "rt_macros.a"
!src "rti_macros.a"

*=$C000

            jmp SHOW_IMAGE

HIDE_IMAGE  +RESET_IRQ
            lda #8
            sta $D016
            lda #32
            ldy #11
-           sta 1064,y
            sta 1104,y
            sta 1144,y
            sta 1184,y
            sta 1224,y
            sta 1264,y
            sta 1304,y
            sta 1344,y
            sta 1384,y
            sta 1424,y
            sta 1464,y
            dey
            bne -
            rts

SHOW_IMAGE  sei
            lda $01
            and #%11111110
            sta $01
            ;+COPY_CHAR_ROM $D000, $2000
            +COPY_DATA CHAR_DATA, CHAR_DATA_END, $2400
            +COPY_DATA SPRITE_DATA, SPRITE_DATA_END, $2800
            +RLINE 70
            lda #$0
            sta $D021

            lda $D018
            and #%11110001
            ora #%00001000
            sta $D018

            +INIT_IRQ irq, 22
            +COPY_CHAR CHAR, 1065, CHAR_COL, 55337
            lda $01
            ora #%00000001
            sta $01

            rts

COPY        +COPY

irq:        +START_IRQ

            +SYNC 27

            lda $D016
            sta B_CHAR_MC
            lda CHAR_MC
            sta $D016
            lda $D022
            sta B_CHAR_COL1
            lda CHAR_COL1
            sta $D022
            lda $D023
            sta B_CHAR_COL2
            lda CHAR_COL2
            sta $D023

            ldy #$10
-           lda $D000,y
            sta B_SPRITE_POS,y
            lda SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda $D025,y
            sta B_SPRITE_COL,y
            lda SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda 2040,y
            sta B_SPRITEDATA,y
            dey
            bpl -
            clc
            lda #$A0
            ldy #0
-           sta 2040,Y
            iny
            adc #5
            cmp #$C8
            bne -

            lda $D017
            sta B_SPRITE_YS
            lda #0
            sta $D017
            lda $D01B
            sta B_SPRITE_BG
            lda SPRITE_BG
            sta $D01B
            lda $D01C
            sta B_SPRITE_MC
            lda SPRITE_MC
            sta $D01C
            lda $D01D
            sta B_SPRITE_XS
            lda SPRITE_XS
            sta $D01D
            lda $D015
            sta B_SPRITE_ON
            lda #255
            sta $D015

            +RLINE 52

            lda #42+21
            sta $D001
            sta $D003
            lda #43+21
            sta $D005
            sta $D007
            lda #45+21
            sta $D009
            sta $D00B
            lda #48+21
            sta $D00D
            sta $D00F

            +RLINE 58
            +WAIT 41

 +WAIT 132
 inc 2040
 inc 2041
 +WAIT 32
 lda #84
 sta 53249
 lda #84
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #85
 sta 53253
 lda #85
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #87
 sta 53257
 lda #87
 sta 53259
 +WAIT 33
 inc 2046
 inc 2047
 +WAIT 32
 lda #90
 sta 53261
 lda #90
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #105
 sta 53249
 lda #105
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #106
 sta 53253
 lda #106
 sta 53255
 +WAIT 32
 inc 2044
 inc 2045
 +WAIT 32
 lda #108
 sta 53257
 lda #108
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #111
 sta 53261
 lda #111
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 lda #126
 sta 53249
 lda #126
 sta 53251
 inc 2042
 inc 2043
 +WAIT 20
 lda #127
 sta 53253
 lda #127
 sta 53255
 inc 2044
 inc 2045
 +WAIT 21
 lda #129
 sta 53257
 lda #129
 sta 53259
 +WAIT 76
 inc 2046
 inc 2047
 +WAIT 32
 lda #132
 sta 53261
 lda #132
 sta 53263
 +WAIT 518
 inc 2040
 inc 2041
 +WAIT 32
 inc 2042
 inc 2043
 +WAIT 76
 inc 2044
 inc 2045
 +WAIT 77
 inc 2046
 inc 2047

            +RLINE 147

            lda B_CHAR_MC
            sta $D016
            lda B_CHAR_COL1
            sta $D022
            lda B_CHAR_COL2
            sta $D023

            ldy #$10
-           lda B_SPRITE_POS,y
            sta $D000,y
            dey
            bpl -

            ldy #$09
-           lda B_SPRITE_COL,y
            sta $D025,y
            dey
            bpl -

            ldy #$07
-           lda B_SPRITEDATA,y
            sta 2040,y
            dey
            bpl -

            lda B_SPRITE_YS
            sta $D017
            lda B_SPRITE_BG
            sta $D01B
            lda B_SPRITE_MC
            sta $D01C
            lda B_SPRITE_XS
            sta $D01D
            lda B_SPRITE_ON
            sta $D015

            +END_IRQ

CHAR_MC     !by 8
CHAR_COL1   !by 0
CHAR_COL2   !by 0
SPRITE_POS  !by 39,42,94,42,53,43,95,43,69,45,71,45,71,48,32,48,0
SPRITE_COL  !by 7,14,11,11,12,13,12,5,6,6
SPRITE_BG   !by 243
SPRITE_MC   !by 194
SPRITE_XS   !by 241

B_CHAR_MC     !by 0
B_CHAR_COL1   !by 0
B_CHAR_COL2   !by 0
B_SPRITE_POS  !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
B_SPRITE_COL  !by 0,0,0,0,0,0,0,0,0,0
B_SPRITE_BG   !by 0
B_SPRITE_MC   !by 0
B_SPRITE_XS   !by 0
B_SPRITE_YS   !by 0
B_SPRITE_ON   !by 0
B_SPRITEDATA

*=$B346

CHAR        !by 128,128,128,128,128,128,128,128,128,128,128,128,133,137,141,128,128,128,128,128,168,176,128,128,128,128,128,128,128,128,162,169,177,128,128,128,128,128,128,128,157,163,170,178,128,128,128,128,128,128,128,158,164,171,179,129,129,138,142,146,150,153,129,165,172,180,130,134,139,143,147,151,154,159,129,173,181,131,135,140,144,148,128,155,160,166,174,181,132,136,128,145,149,152,156,161,167,175,182,128,128,128,128,128,128,128,128,128,128,183,128,128,128,128,128,128,128,128,128,128,184
CHAR_COL    !by 14,14,14,14,14,14,14,14,14,14,14,14,1,1,1,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,5,9,14,14,14,14,14,14,14,14,14,14,9,14,14,15,14,15,14,6,14,5,14,9,6,6,6,6,14,6,6,6,6,6,9,6,6,15,6,6,6,6,6,6,6,9,12,12,7,7,15,15,15,15,6,15,9,7,7,7,7,7,7,7,7,7,7,9,7,7,7,7,7,7,7,7,7,7,9
CHAR_DATA   !by 255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,255,255,255,253,255,255,255,253,255,254,255,255,255,255,255,255,0,4,16,128,0,0,0,0,0,0,3,7,0,0,0,0,255,255,254,255,255,255,216,255,191,115,255,223,255,255,248,192,128,0,0,0,0,0,0,0,0,248,252,255,255,15,0,0,0,0,0,1,0,0,0,0,253,255,255,251,224,112,253,255,0,0,0,0,0,0,255,0,0,0,0,240,254,254,56,0,255,255,255,255,251,0,0,16,16,255,255,252,240,252,255,110,252,252,207,255,255,255,127,63,192,224,248,255,255,255,255,255,0,0,0,32,2,0,0,0,0,64,2,0,0,0,8,0,7,63,223,255,255,255,255,255,0,0,0,127,0,0,0,0,255,255,239,238,238,128,0,0,184,173,31,29,63,255,255,255,0,0,0,200,0,0,0,0,0,0,0,0,0,241,113,99,223,255,255,255,255,255,254,248,255,245,255,255,255,255,255,255,0,0,112,4,1,0,0,0,255,255,255,255,255,255,254,252,248,248,248,248,254,255,255,255,255,255,255,255,255,128,0,0,175,255,255,255,255,255,255,255,0,0,0,0,0,63,0,0,255,255,240,192,192,131,255,255,255,254,248,224,128,0,1,7,15,30,62,60,120,248,240,240,13,25,27,31,30,62,56,0,119,255,127,255,255,255,255,255,255,255,252,240,128,0,0,0,255,255,255,252,240,252,254,255,255,255,0,0,0,255,255,240,56,159,240,193,7,14,60,113,0,1,3,7,15,31,63,127,127,255,255,255,255,0,0,0,255,255,255,252,249,1,3,0,235,126,255,191,255,255,255,255,0,0,196,0,0,0,0,0,255,255,255,127,31,15,7,131,227,227,113,1,0,128,240,0,0,0,0,0,0,3,15,31,15,15,15,15,15,15,15,15,15,15,15,15,15,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,15,15,15,15,15,15,15,15,31,31,31,31,63,63,0,0,0,0,0
CHAR_DATA_END
SPRITE_DATA !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,0,3,62,0,3,152,0,25,0,0,0,8,0,0,30,0,176,28,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,15,255,252,3,255,255,3,255,255,0,255,255,192,255,255,240,255,255,240,252,0,12,240,0,0,240,0,0,192,255,192,255,255,252,255,252,0,255,240,0,255,0,0,0,252,3,192,240,15,192,192,63,0,192,60,0,0,48,0,0,240,12,3,192,0,3,0,48,15,0,240,15,0,240,12,3,240,252,3,240,252,15,240,252,15,252,252,15,252,252,63,252,252,63,252,252,63,252,252,255,252,0,0,2,0,0,2,0,0,0,2,0,0,2,0,0,2,0,0,2,0,0,2,0,0,2,192,252,2,255,255,2,255,255,194,51,15,2,0,48,194,48,0,2,0,48,2,0,0,2,0,0,2,0,0,2,0,0,2,0,0,2,0,0,2,0,5,2,0,85,66,0,5,85,84,21,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,80,85,85,80,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,32,4,2,32,132,71,112,142,71,121,206,224,0,29,225,232,0,1,8,0,0,28,128,12,28,32,0,24,0,0,0,0,0,0,0,8,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,8,0,0,4,0,0,2,0,0,0,64,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,0,0,48,0,0,24,0,0,0,0,0,6,0,0,2,0,0,2,3,255,194,4,0,30,0,0,3,0,0,0,0,0,0,0,3,254,0,48,0,0,128,3,0,0,0,14,1,0,56,6,0,224,12,1,128,56,7,0,96,12,0,0,24,0,0,16,0,0,48,0,0,96,0,0,64,0,0,192,0,1,128,0,1,0,0,3,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,16,128,0,20,128,0,21,128,0,29,128,0,141,128,0,236,0,0,32,0,0,0,32,0,0,32,0,12,32,0,8,0,3,152,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,200,48,1,2,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,0,0,60,0,0,26,0,0,14,0,0,7,0,0,2,0,0,2,0,3,251,0,6,7,0,7,253,0,7,6,0,0,3,0,0,63,0,0,97,0,0,191,0,1,230,0,3,205,0,7,155,0,0,15,182,0,13,126,0,26,108,0,30,216,0,28,240,0,28,240,0,29,160,0,9,224,0,1,192,0,3,64,0,3,128,0,3,128,0,2,128,0,3,128,0,3,128,0,3,0,0,3,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,243,255,255,243,255,255,243,255,255,255,255,255,255,255,255,255,255,255,15,255,252,0,255,252,0,255,255,252,255,255,255,255,255,240,255,255,192,255,255,0,255,255,60,255,252,240,255,252,240,255,252,240,255,240,192,255,243,204,0,255,243,204,255,243,12,255,255,60,255,255,60,255,255,60,255,255,60,255,255,252,255,255,255,255,255,255,255,252,255,255,252,255,255,252,255,255,252,255,170,168,170,170,170,170,170,170,170,174,170,170,186,170,170,170,170,170,186,170,170,170,170,170,0,170,255,250,170,255,250,171,255,250,170,250,186,171,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,90,21,169,86,85,169,84,85,69,85,85,85,85,85,85,85,85,85,85,85,85,85,0,85,85,85,85,85,85,85,85,85,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,84,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
            !by 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,63,255,255,63,255,0,255,3,255,255,3,255,255,195,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,170,170,174,170,170,170,170,170,170,170,184,138,170,170,170,171,170,170,186,170,42,170,136,42,0,170,202,170,174,170,170,186,174,170,174,170,42,170,170,170,170,174,234,174,170,170,170,170,170,170,170,170,170,10,170,169,86,170,165,90,170,149,86,170,149,86,170,85,85,65,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,85,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
SPRITE_DATA_END
